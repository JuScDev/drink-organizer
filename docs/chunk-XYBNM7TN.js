import{a as W,b as A,c as I,d as B,h as G}from"./chunk-GNJKLPPG.js";import{a as F}from"./chunk-UNHCKELP.js";import{B as D,D as P,F as x,G as S,H as V,I as a,J as s,L as M,M as p,N as O,O as g,P as d,T as f,U as C,V as b,a as y,b as T,c as w,ja as E,la as R,m as h,na as N,o as l,p as c,t as k,u as _,x as v}from"./chunk-SP47PYLO.js";var Q=(u,i)=>i.name;function z(u,i){u&1&&d(0," Transaktion bearbeiten ")}function q(u,i){u&1&&d(0," Neue Transaktion ")}function j(u,i){if(u&1){let t=M();a(0,"li")(1,"input",9),b("ngModelChange",function(n){let o=l(t).$implicit;return C(o.name,n)||(o.name=n),c(n)}),p("blur",function(){let n=l(t).$implicit;return c(n.name=n.name.trim())}),s(),a(2,"input",10),b("ngModelChange",function(n){let o=l(t).$implicit;return C(o.quantity,n)||(o.quantity=n),c(n)}),s(),a(3,"button",7),p("click",function(){let n=l(t).$implicit,o=O();return c(o.removeDrink(n.name))}),d(4,"\u274C"),s()()}if(u&2){let t=i.$implicit;_(),f("ngModel",t.name),_(),f("ngModel",t.quantity)}}var L=class u{_transactionService=h(F);_router=h(N);_route=h(R);isEditing=k(!1);transactionId=k(void 0);name=k("");isRestock=k(!0);drinks=k([]);constructor(){this._route.paramMap.subscribe(i=>w(this,null,function*(){let t=i.get("id");if(t){this.isEditing.set(!0),this.transactionId.set(t);let e=yield this._transactionService.getTransactionById(t);e&&(this.name.set(e.name),this.isRestock.set(e.isRestock),this.drinks.set(e.drinks))}else{let e=yield this._transactionService.getAllDrinksFromPreviousTransactions();this.drinks.set(e)}}))}toggleRestock(){this.isRestock.set(!this.isRestock())}addDrink(i,t){if(!(!i||!t||+t<=0)){if(this.drinks().some(e=>e.name===i)){alert("Dieses Getr\xE4nk ist bereits in der Liste.");return}this.drinks.update(e=>[...e,{name:i,quantity:+t}])}}removeDrink(i){this.drinks.update(t=>t.filter(e=>e.name!==i))}saveTransaction(){let i={name:this.name(),date:new Date().toISOString(),isRestock:this.isRestock(),drinks:this.drinks()};this.isEditing()?this._transactionService.updateTransaction(T(y({},i),{id:this.transactionId()})):this._transactionService.addTransaction(i),this._router.navigate(["/"])}cancel(){this._router.navigate(["/"])}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=v({type:u,selectors:[["app-transaction-detail"]],decls:24,vars:3,consts:[["drinkName",""],["drinkQuantity",""],[3,"ngModelChange","ngModel"],["type","checkbox",1,"checkbox",3,"change","checked"],[1,"add"],["placeholder","Getr\xE4nkename",3,"keyup.enter"],["type","number","placeholder","Menge",3,"keyup.enter"],[3,"click"],[1,"button-group"],["placeholder","Getr\xE4nkename",3,"ngModelChange","blur","ngModel"],["type","number","placeholder","Menge",3,"ngModelChange","ngModel"]],template:function(t,e){if(t&1){let n=M();a(0,"h1"),D(1,z,1,0)(2,q,1,0),s(),a(3,"label"),d(4," Name: "),a(5,"input",2),b("ngModelChange",function(r){return l(n),C(e.name,r)||(e.name=r),c(r)}),s()(),a(6,"label")(7,"input",3),p("change",function(){return l(n),c(e.toggleRestock())}),s(),d(8,` Einkauf
`),s(),a(9,"div",4)(10,"input",5,0),p("keyup.enter",function(){l(n);let r=g(11),m=g(13);return e.addDrink(r.value.trim(),m.value),r.value="",m.value="",c(r.focus())}),s(),a(12,"input",6,1),p("keyup.enter",function(){l(n);let r=g(11),m=g(13);return e.addDrink(r.value.trim(),m.value),r.value="",m.value="",c(r.focus())}),s(),a(14,"button",7),p("click",function(){l(n);let r=g(11),m=g(13);return e.addDrink(r.value.trim(),m.value),r.value="",m.value="",c(r.focus())}),d(15," Getr\xE4nk hinzuf\xFCgen "),s()(),a(16,"ul"),S(17,j,5,2,"li",null,Q),s(),a(19,"div",8)(20,"button",7),p("click",function(){return l(n),c(e.saveTransaction())}),d(21,"Speichern"),s(),a(22,"button",7),p("click",function(){return l(n),c(e.cancel())}),d(23,"Abbrechen"),s()()}t&2&&(_(),x(e.isEditing()?1:2),_(4),f("ngModel",e.name),_(2),P("checked",e.isRestock()),_(10),V(e.drinks()))},dependencies:[E,G,W,B,A,I],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#333;margin-bottom:20px}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px;font-weight:700}[_nghost-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:15px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px;margin-right:10px;border:1px solid #ccc;border-radius:4px;height:40px;width:150px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}[_nghost-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}[_nghost-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:20px}"]})};export{L as TransactionDetailComponent};
