import{a as $}from"./chunk-UNHCKELP.js";import{$ as S,B as d,D as l,F as p,G as m,H as u,I as r,J as i,L as b,M as h,N as _,P as a,Q as g,R as C,X as x,Y as P,Z as O,_ as E,da as T,ga as F,ia as I,ja as D,m as f,o as v,oa as w,p as y,t as k,u as o,x as M}from"./chunk-SP47PYLO.js";var V=(n,e)=>e.id,q=(n,e)=>e.name,A=()=>["/transaction/new"],G=()=>["/usage-overview"],j=(n,e)=>({restock:n,consumption:e}),B=n=>["/transaction",n];function K(n,e){if(n&1&&(r(0,"li")(1,"strong"),a(2),i(),a(3),i()),n&2){let t=e.$implicit;o(2),g(t.name),o(),C(": ",t.quantity,"x ")}}function z(n,e){if(n&1&&(r(0,"ul"),m(1,K,4,2,"li",null,q),i()),n&2){let t=_();o(),u(t.inventory())}}function H(n,e){n&1&&(r(0,"p"),a(1,"Keine Getr\xE4nke vorhanden."),i())}function J(n,e){if(n&1&&(r(0,"li")(1,"strong"),a(2),i(),a(3),i()),n&2){let t=_().$implicit;o(2),C("",t.name,":"),o(),C(" ",t.quantity,"x ")}}function Q(n,e){if(n&1&&d(0,J,4,2,"li"),n&2){let t=e.$index;p(t<3?0:-1)}}function U(n,e){n&1&&(r(0,"span"),a(1,"..."),i())}function W(n,e){if(n&1){let t=b();r(0,"div",3)(1,"p",4),a(2),i(),r(3,"p",5),a(4),E(5,"date"),i(),r(6,"ul"),m(7,Q,1,1,null,null,q),i(),d(9,U,2,0,"span"),r(10,"button",6),h("click",function(){let s,N=v(t).$implicit,R=_();return y(R.deleteTransaction((s=N.id)!==null&&s!==void 0?s:""))}),a(11," \u{1F5D1}\uFE0F "),i(),r(12,"button",7),a(13," \u270F\uFE0F "),i()()}if(n&2){let t=e.$implicit;l("ngClass",O(8,j,t.isRestock,!t.isRestock)),o(2),g(t.name),o(2),g(S(5,5,t.date,"dd.MM.yyyy")),o(3),u(t.drinks),o(2),p(t.drinks.length>3?9:-1),o(3),l("routerLink",P(11,B,t.id))}}var L=class n{transactions=k([]);_transactionService=f($);constructor(){this._transactionService.getTransactions().subscribe(e=>{this.transactions.set(e)})}inventory=T(()=>{let e=new Map;for(let t of this.transactions())for(let c of t.drinks){let s=t.isRestock?c.quantity:-c.quantity;e.set(c.name,(e.get(c.name)||0)+s)}return Array.from(e,([t,c])=>({name:t,quantity:c}))});deleteTransaction(e){this._transactionService.deleteTransaction(e).then(()=>{this.transactions.set(this.transactions().filter(t=>t.id!==e))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=M({type:n,selectors:[["app-inventory"]],decls:14,vars:6,consts:[[1,"button-group"],[3,"routerLink"],[1,"transactions-grid"],[1,"transaction-card",3,"ngClass"],[1,"transaction-name"],[1,"transaction-date"],[1,"icon-button",3,"click"],[1,"icon-button",3,"routerLink"]],template:function(t,c){t&1&&(r(0,"h1"),a(1,"Aktueller Getr\xE4nkebestand"),i(),d(2,z,3,0,"ul")(3,H,2,0,"p"),r(4,"h2"),a(5,"Transaktionen"),i(),r(6,"div",0)(7,"button",1),a(8,"Neue Transaktion"),i(),r(9,"button",1),a(10,"Verbrauchs\xFCbersicht"),i()(),r(11,"div",2),m(12,W,14,13,"div",3,V),i()),t&2&&(o(2),p(c.inventory().length>0?2:-1),o(),p(c.inventory().length===0?3:-1),o(4),l("routerLink",x(4,A)),o(2),l("routerLink",x(5,G)),o(3),u(c.transactions()))},dependencies:[D,F,I,w],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .transactions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-top:30px}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:50px}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   .transaction-card[_ngcontent-%COMP%]{padding:16px;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;position:relative}[_nghost-%COMP%]   .transaction-card[_ngcontent-%COMP%]   .transaction-name[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .transaction-card.restock[_ngcontent-%COMP%]{background-color:#d4edda}[_nghost-%COMP%]   .transaction-card.consumption[_ngcontent-%COMP%]{background-color:#f8d7da}[_nghost-%COMP%]   .transaction-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;border:none;cursor:pointer}[_nghost-%COMP%]   .transaction-card[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{outline:none;border:none;background:none;float:right}[_nghost-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}"]})};export{L as InventoryComponent};
